<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Poochie - A lost Bubble</title>
    <link rel="icon" href="images/poses/bubble.png" type="image/x-icon" />
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        #intro-section, #game-content {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgb(30,30,30);
        }
        #intro-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        #skip-button {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(to right, #ff6b6b, #4ecdc4);
            border: 3px solid white;
            border-radius: 50px;
            color: white;
            padding: 20px 60px;
            font-size: 24px;
            font-weight: bold;
            text-transform: uppercase;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            z-index: 10;
        }
        #skip-button:hover {
            transform: translateX(-50%) scale(1.05);
            box-shadow: 0 15px 25px rgba(0,0,0,0.4);
        }
        #game-content {
            display: none;
            text-align: center;
            color: white;
            font-family: Courier, monospace;
        }
    </style>
</head>
<body>
    <div id="intro-section">
        <video id="intro-video">
            <source src="video/GGJ VID.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <button id="skip-button" onclick="skipIntro()">Skip Intro</button>
    </div>

    <div id="game-content">
        <div id="canvas"></div>
        <div>Presented to you by team @QuestCoder</div>
        <div>If this isn't loading, just keep hitting refresh. Have fun!</div>
    </div>

    <script>
        const video = document.getElementById('intro-video');
        const audio = new Audio('audio/intro-song.mp3'); // Path to your audio file

        function initializeVideo() {
            video.defaultMuted = false;
            video.muted = false;
            video.play().catch(error => {
                // If autoplay fails, add a user interaction listener
                document.body.addEventListener('click', () => {
                    video.play();
                });
            });
        }

        function skipIntro() {
            document.getElementById('intro-section').style.display = 'none';
            document.getElementById('game-content').style.display = 'block';
            playSound();
        }

        function playSound() {
            audio.play().catch(error => {
                console.error('Failed to play audio:', error);
            });
        }

        video.addEventListener('ended', () => {
            skipIntro();
        });

        // Multiple initialization attempts
        window.addEventListener('load', initializeVideo);
        document.addEventListener('DOMContentLoaded', initializeVideo);

        // Fallback interaction
        document.body.addEventListener('click', initializeVideo, { once: true });
    </script>

    <!-- Original game scripts -->
    <script language="javascript" type="text/javascript" src="libraries/p5.js"></script>
    <script language="javascript" src="libraries/p5.dom.js"></script>
    <script language="javascript" src="libraries/p5.sound.js"></script>
    <script language="javascript" type="text/javascript" src="sketch.js"></script>
    <script language="javascript" type="text/javascript" src="Player.js"></script>
    <script language="javascript" type="text/javascript" src="Line.js"></script>
    <script language="javascript" type="text/javascript" src="Level.js"></script>
    <script language="javascript" type="text/javascript" src="LevelSetupFunction.js"></script>
    <script language="javascript" type="text/javascript" src="Brain.js"></script>
    <script language="javascript" type="text/javascript" src="Population.js"></script>
    <script language="javascript" type="text/javascript" src="Coin.js"></script>
</body>
</html>
